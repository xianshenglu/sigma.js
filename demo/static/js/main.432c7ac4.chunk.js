(this["webpackJsonpsigma-demo"]=this["webpackJsonpsigma-demo"]||[]).push([[0],{42:function(e,t,c){},91:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(34),s=c.n(r),i=(c(42),c(13)),o=c(3),l=c(5),u=c(6),j=c(35),b=c.n(j),d=c(4),h="#000000";function O(e,t,c){if(t.label){var n=c.labelSize,a=c.labelFont,r=c.labelWeight;e.font="".concat(r," ").concat(n,"px ").concat(a);var s=e.measureText(t.label).width+8;e.fillStyle="#ffffffcc",e.fillRect(t.x+t.size,t.y+n/3-15,s,20),e.fillStyle="#000",e.fillText(t.label,t.x+t.size+3,t.y+n/3)}}var f=function(e,t){var c=Object(n.useState)(e),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){var c=setTimeout((function(){e!==r&&s(e)}),t);return function(){clearTimeout(c)}}),[e,t]),r},m=c(1),g=function(e){var t=e.children,c=e.hoveredNode,a=Object(u.useSigma)(),r=a.getGraph(),s=f(c,40);return Object(n.useEffect)((function(){a.setSetting("hoverRenderer",(function(e,t,c){return function(e,t,c){var n=c.labelSize,a=c.labelFont,r=c.labelWeight,s=n-2,i=t.label,o="unknown"!==t.tag?t.tag:"",l=t.clusterLabel;e.beginPath(),e.fillStyle="#fff",e.shadowOffsetX=0,e.shadowOffsetY=2,e.shadowBlur=8,e.shadowColor="#000",e.font="".concat(r," ").concat(n,"px ").concat(a);var u=e.measureText(i).width;e.font="".concat(r," ").concat(s,"px ").concat(a);var j=o?e.measureText(o).width:0;e.font="".concat(r," ").concat(s,"px ").concat(a);var b=l?e.measureText(l).width:0,d=Math.max(u,j,b),O=Math.round(t.x),f=Math.round(t.y),m=Math.round(d+n/2+t.size+3),g=Math.round(n/2+4),x=o?Math.round(s/2+9):0;!function(e,t,c,n,a,r){e.beginPath(),e.moveTo(t+r,c),e.lineTo(t+n-r,c),e.quadraticCurveTo(t+n,c,t+n,c+r),e.lineTo(t+n,c+a-r),e.quadraticCurveTo(t+n,c+a,t+n-r,c+a),e.lineTo(t+r,c+a),e.quadraticCurveTo(t,c+a,t,c+a-r),e.lineTo(t,c+r),e.quadraticCurveTo(t,c,t+r,c),e.closePath()}(e,O,f-x-12,m,Math.round(s/2+9)+g+x+12,5),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.fillStyle=h,e.font="".concat(r," ").concat(n,"px ").concat(a),e.fillText(i,t.x+t.size+3,t.y+n/3),o&&(e.fillStyle=h,e.font="".concat(r," ").concat(s,"px ").concat(a),e.fillText(o,t.x+t.size+3,t.y-2*n/3-2)),e.fillStyle=t.color,e.font="".concat(r," ").concat(s,"px ").concat(a),e.fillText(l,t.x+t.size+3,t.y+n/3+3+s)}(e,Object(o.a)(Object(o.a)({},a.getNodeDisplayData(t.key)),t),c)}))}),[a,r]),Object(n.useEffect)((function(){var e=s?a.getNodeDisplayData(s).color:"";a.setSetting("nodeReducer",s?function(e,t){return e===s||r.hasEdge(e,s)||r.hasEdge(s,e)?Object(o.a)(Object(o.a)({},t),{},{zIndex:1}):Object(o.a)(Object(o.a)({},t),{},{zIndex:0,label:"",color:"#bbb",image:null,highlighted:!1})}:null),a.setSetting("edgeReducer",s?function(t,c){return r.hasExtremity(t,s)?Object(o.a)(Object(o.a)({},c),{},{color:e,size:4}):Object(o.a)(Object(o.a)({},c),{},{color:"#eee",hidden:!0})}:null)}),[s]),Object(m.jsx)(m.Fragment,{children:t})};function x(){return document.querySelector(".sigma-mouse")}var p=function(e){var t=e.setHoveredNode,c=e.children,a=Object(u.useSigma)().getGraph(),r=Object(u.useRegisterEvents)();return Object(n.useEffect)((function(){r({clickNode:function(e){var t=e.node;a.getNodeAttribute(t,"hidden")||window.open(a.getNodeAttribute(t,"URL"),"_blank")},enterNode:function(e){var c=e.node;t(c);var n=x();n&&n.classList.add("mouse-pointer")},leaveNode:function(){t(null);var e=x();e&&e.classList.remove("mouse-pointer")}})}),[]),Object(m.jsx)(m.Fragment,{children:c})},y=c(9),k=function(e){var t=e.dataset,c=e.filters,a=e.children,r=Object(u.useSigma)().getGraph();return Object(n.useEffect)((function(){if(r&&t){var e=Object(d.keyBy)(t.clusters,"key"),c=Object(d.keyBy)(t.tags,"key");t.nodes.forEach((function(t){return r.addNode(t.key,Object(o.a)(Object(o.a)(Object(o.a)({},t),Object(d.omit)(e[t.cluster],"key")),{},{image:"".concat("/demo","/images/").concat(c[t.tag].image)}))})),t.edges.forEach((function(e){var t=Object(l.a)(e,2),c=t[0],n=t[1];return r.addEdge(c,n,{size:1})}));var n=r.nodes().map((function(e){return r.getNodeAttribute(e,"score")})),a=Math.min.apply(Math,Object(y.a)(n)),s=Math.max.apply(Math,Object(y.a)(n));return r.forEachNode((function(e){return r.setNodeAttribute(e,"size",(r.getNodeAttribute(e,"score")-a)/(s-a)*27+3)})),function(){return r.clear()}}}),[r,t]),Object(n.useEffect)((function(){var e=c.clusters,t=c.tags;r.forEachNode((function(c,n){var a=n.cluster,s=n.tag;return r.setNodeAttribute(c,"hidden",!e[a]||!t[s])}))}),[r,c]),Object(m.jsx)(m.Fragment,{children:a})},v=c(10),N=c(8),w=c(36),S=c.n(w),E=function(e){var t=e.title,c=e.initiallyDeployed,a=e.children,r=Object(n.useState)(c||!1),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(n.useRef)(null);return Object(n.useEffect)((function(){i&&setTimeout((function(){u.current&&u.current.parentElement.scrollTo({top:u.current.offsetTop-5,behavior:"smooth"})}),300)}),[i]),Object(m.jsxs)("div",{className:"panel",ref:u,children:[Object(m.jsxs)("h2",{children:[t," ",Object(m.jsx)("button",{type:"button",onClick:function(){return o((function(e){return!e}))},children:i?Object(m.jsx)(N.b,{}):Object(m.jsx)(N.c,{})})]}),Object(m.jsx)(S.a,{duration:300,height:i?"auto":0,children:a})]})},C=function(){return Object(m.jsxs)(E,{initiallyDeployed:!0,title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(v.c,{className:"text-muted"})," Description"]}),children:[Object(m.jsxs)("p",{children:["This map represents a ",Object(m.jsx)("i",{children:"network"}),' of Wikipedia articles around the topic of "Data vizualisation". Each'," ",Object(m.jsx)("i",{children:"node"})," represents an article, and each edge a"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/See_also",children:'"See also" link'}),"."]}),Object(m.jsxs)("p",{children:["The seed articles were selected by hand by the"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://medialab.sciencespo.fr/",children:"Sciences-Po m\xe9dialab"})," ","team, and the network was crawled using"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://densitydesign.github.io/strumentalia-seealsology/",children:"Seealsology"}),", and then cleaned and enriched manually. This makes the dataset creditable to both the m\xe9dialab team and"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/Wikipedia:Wikipedians",children:"Wikipedia editors"}),"."]}),Object(m.jsxs)("p",{children:["This web application has been developed by"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.ouestware.com/en/",children:"OuestWare"}),", using"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://reactjs.org/",children:"react"})," ","and"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.sigmajs.org",children:"sigma.js"}),". You can read the source code"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/jacomyal/sigma.js/tree/main/demo",children:"on GitHub"}),"."]}),Object(m.jsxs)("p",{children:["Nodes sizes are related to their"," ",Object(m.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/Betweenness_centrality",children:"betweenness centrality"}),". More central nodes (ie. bigger nodes) are important crossing points in the network. Finally, You can click a node to open the related Wikipedia article."]})]})},T=c(92),M=function(e){var t=e.clusters,c=e.filters,a=e.toggleCluster,r=e.setClusters,s=Object(u.useSigma)().getGraph(),i=Object(n.useMemo)((function(){var e={};return s.forEachNode((function(t,c){var n=c.cluster;return e[n]=(e[n]||0)+1})),e}),[]),o=Object(n.useMemo)((function(){return Math.max.apply(Math,Object(y.a)(Object(d.values)(i)))}),[i]),j=Object(n.useMemo)((function(){return Object.keys(c.clusters).length}),[c]),b=Object(n.useState)(i),h=Object(l.a)(b,2),O=h[0],f=h[1];Object(n.useEffect)((function(){requestAnimationFrame((function(){var e={};s.forEachNode((function(t,c){var n=c.cluster;return!c.hidden&&(e[n]=(e[n]||0)+1)})),f(e)}))}),[c]);var g=Object(n.useMemo)((function(){return Object(d.sortBy)(t,(function(e){return-i[e.key]}))}),[t,i]);return Object(m.jsxs)(E,{title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.d,{className:"text-muted"})," Clusters",j<t.length?Object(m.jsxs)("span",{className:"text-muted text-small",children:[" ","(",j," / ",t.length,")"]}):""]}),children:[Object(m.jsx)("p",{children:Object(m.jsx)("i",{className:"text-muted",children:"Click a cluster to show/hide related pages from the network."})}),Object(m.jsxs)("p",{className:"buttons",children:[Object(m.jsxs)("button",{className:"btn",onClick:function(){return r(Object(d.mapValues)(Object(d.keyBy)(t,"key"),(function(){return!0})))},children:[Object(m.jsx)(T.a,{})," Check all"]})," ",Object(m.jsxs)("button",{className:"btn",onClick:function(){return r({})},children:[Object(m.jsx)(T.b,{})," Uncheck all"]})]}),Object(m.jsx)("ul",{children:g.map((function(e){var t=i[e.key],n=O[e.key]||0;return Object(m.jsxs)("li",{className:"caption-row",title:"".concat(t," page").concat(t>1?"s":"").concat(n!==t?" (only ".concat(n," visible)"):""),children:[Object(m.jsx)("input",{type:"checkbox",checked:c.clusters[e.key]||!1,onChange:function(){return a(e.key)},id:"cluster-".concat(e.key)}),Object(m.jsxs)("label",{htmlFor:"cluster-".concat(e.key),children:[Object(m.jsx)("span",{className:"circle",style:{background:e.color,borderColor:e.color}})," ",Object(m.jsxs)("div",{className:"node-label",children:[Object(m.jsx)("span",{children:e.clusterLabel}),Object(m.jsx)("div",{className:"bar",style:{width:100*t/o+"%"},children:Object(m.jsx)("div",{className:"inside-bar",style:{width:100*n/t+"%"}})})]})]})]},e.key)}))})]})},z=function(e){var t=e.filters,c=Object(u.useSigma)(),a=Object(n.useState)(""),r=Object(l.a)(a,2),s=r[0],i=r[1],j=Object(n.useState)([]),b=Object(l.a)(j,2),d=b[0],h=b[1],O=Object(n.useState)(null),f=Object(l.a)(O,2),g=f[0],x=f[1],p=function(){var e=[],t=s.toLowerCase();!g&&s.length>1&&c.getGraph().forEachNode((function(c,n){!n.hidden&&n.label&&0===n.label.toLowerCase().indexOf(t)&&e.push({id:c,label:n.label})})),h(e)};Object(n.useEffect)((function(){return p()}),[s]),Object(n.useEffect)((function(){requestAnimationFrame(p)}),[t]),Object(n.useEffect)((function(){if(g){c.getGraph().setNodeAttribute(g,"highlighted",!0);var e=c.getNodeDisplayData(g);return e&&c.getCamera().animate(Object(o.a)(Object(o.a)({},e),{},{ratio:.05}),{duration:600}),function(){c.getGraph().setNodeAttribute(g,"highlighted",!1)}}}),[g]);return Object(m.jsxs)("div",{className:"search-wrapper",children:[Object(m.jsx)("input",{type:"search",placeholder:"Search in nodes...",list:"nodes",value:s,onChange:function(e){var t=e.target.value,c=d.find((function(e){return e.label===t}));c?(i(c.label),h([]),x(c.id)):(x(null),i(t))},onKeyPress:function(e){"Enter"===e.key&&d.length&&(i(d[0].label),x(d[0].id))}}),Object(m.jsx)(v.d,{className:"icon"}),Object(m.jsx)("datalist",{id:"nodes",children:d.map((function(e){return Object(m.jsx)("option",{value:e.label,children:e.label},e.id)}))})]})};function F(e){return(100*e).toFixed(1)+"%"}var A=function(e){var t=e.filters,c=Object(u.useSigma)().getGraph(),a=Object(n.useState)({nodes:0,edges:0}),r=Object(l.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){requestAnimationFrame((function(){var e={nodes:0,edges:0};c.forEachNode((function(t,c){return!c.hidden&&e.nodes++})),c.forEachEdge((function(t,c,n,a,r,s){return!r.hidden&&!s.hidden&&e.edges++})),i(e)}))}),[t]),Object(m.jsxs)("div",{className:"graph-title",children:[Object(m.jsx)("h1",{children:"A cartography of Wikipedia pages around data visualization"}),Object(m.jsx)("h2",{children:Object(m.jsxs)("i",{children:[c.order," node",c.order>1?"s":""," ",s.nodes!==c.order?" (only ".concat(F(s.nodes/c.order)," visible)"):"",", ",c.size," edge",c.size>1?"s":""," ",s.edges!==c.size?" (only ".concat(F(s.edges/c.size)," visible)"):""]})})]})},B=function(e){var t=e.tags,c=e.filters,a=e.toggleTag,r=e.setTags,s=Object(u.useSigma)().getGraph(),i=Object(n.useMemo)((function(){var e={};return s.forEachNode((function(t,c){var n=c.tag;return e[n]=(e[n]||0)+1})),e}),[]),o=Object(n.useMemo)((function(){return Math.max.apply(Math,Object(y.a)(Object(d.values)(i)))}),[i]),j=Object(n.useMemo)((function(){return Object.keys(c.tags).length}),[c]),b=Object(n.useState)(i),h=Object(l.a)(b,2),O=h[0],f=h[1];Object(n.useEffect)((function(){requestAnimationFrame((function(){var e={};s.forEachNode((function(t,c){var n=c.tag;return!c.hidden&&(e[n]=(e[n]||0)+1)})),f(e)}))}),[c]);var g=Object(n.useMemo)((function(){return Object(d.sortBy)(t,(function(e){return"unknown"===e.key?1/0:-i[e.key]}))}),[t,i]);return Object(m.jsxs)(E,{title:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(N.a,{className:"text-muted"})," Categories",j<t.length?Object(m.jsxs)("span",{className:"text-muted text-small",children:[" ","(",j," / ",t.length,")"]}):""]}),children:[Object(m.jsx)("p",{children:Object(m.jsx)("i",{className:"text-muted",children:"Click a category to show/hide related pages from the network."})}),Object(m.jsxs)("p",{className:"buttons",children:[Object(m.jsxs)("button",{className:"btn",onClick:function(){return r(Object(d.mapValues)(Object(d.keyBy)(t,"key"),(function(){return!0})))},children:[Object(m.jsx)(T.a,{})," Check all"]})," ",Object(m.jsxs)("button",{className:"btn",onClick:function(){return r({})},children:[Object(m.jsx)(T.b,{})," Uncheck all"]})]}),Object(m.jsx)("ul",{children:g.map((function(e){var t=i[e.key],n=O[e.key]||0;return Object(m.jsxs)("li",{className:"caption-row",title:"".concat(t," page").concat(t>1?"s":"").concat(n!==t?" (only ".concat(n," visible)"):""),children:[Object(m.jsx)("input",{type:"checkbox",checked:c.tags[e.key]||!1,onChange:function(){return a(e.key)},id:"tag-".concat(e.key)}),Object(m.jsxs)("label",{htmlFor:"tag-".concat(e.key),children:[Object(m.jsx)("span",{className:"circle",style:{backgroundImage:"url(".concat("/demo","/images/").concat(e.image,")")}})," ",Object(m.jsxs)("div",{className:"node-label",children:[Object(m.jsx)("span",{children:e.key}),Object(m.jsx)("div",{className:"bar",style:{width:100*t/o+"%"},children:Object(m.jsx)("div",{className:"inside-bar",style:{width:100*n/t+"%"}})})]})]})]},e.key)}))})]})},_=(c(90),c(37)),D=c(22),G=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),j=s[0],h=s[1],f=Object(n.useState)(null),x=Object(l.a)(f,2),y=x[0],N=x[1],w=Object(n.useState)({clusters:{},tags:{}}),S=Object(l.a)(w,2),E=S[0],T=S[1],F=Object(n.useState)(null),G=Object(l.a)(F,2),q=G[0],R=G[1];return Object(n.useEffect)((function(){fetch("".concat("/demo","/dataset.json")).then((function(e){return e.json()})).then((function(e){N(e),T({clusters:Object(d.mapValues)(Object(d.keyBy)(e.clusters,"key"),Object(d.constant)(!0)),tags:Object(d.mapValues)(Object(d.keyBy)(e.tags,"key"),Object(d.constant)(!0))}),requestAnimationFrame((function(){return h(!0)}))}))}),[]),y?Object(m.jsx)("div",{id:"app-root",className:c?"show-contents":"",children:Object(m.jsxs)(u.SigmaContainer,{graphOptions:{type:"directed"},initialSettings:{nodeProgramClasses:{image:b()()},labelRenderer:O,defaultNodeType:"image",defaultEdgeType:"arrow",labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:15,labelFont:"Lato, sans-serif",zIndex:!0},className:"react-sigma",children:[Object(m.jsx)(g,{hoveredNode:q}),Object(m.jsx)(p,{setHoveredNode:R}),Object(m.jsx)(k,{dataset:y,filters:E}),j&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"controls",children:[Object(m.jsx)("div",{className:"ico",children:Object(m.jsx)("button",{type:"button",className:"show-contents",onClick:function(){return a(!0)},title:"Show caption and description",children:Object(m.jsx)(D.a,{})})}),Object(m.jsx)(u.FullScreenControl,{className:"ico",customEnterFullScreen:Object(m.jsx)(v.a,{}),customExitFullScreen:Object(m.jsx)(v.b,{})}),Object(m.jsx)(u.ZoomControl,{className:"ico",customZoomIn:Object(m.jsx)(v.e,{}),customZoomOut:Object(m.jsx)(v.f,{}),customZoomCenter:Object(m.jsx)(D.b,{})})]}),Object(m.jsxs)("div",{className:"contents",children:[Object(m.jsx)("div",{className:"ico",children:Object(m.jsx)("button",{type:"button",className:"ico hide-contents",onClick:function(){return a(!1)},title:"Show caption and description",children:Object(m.jsx)(_.a,{})})}),Object(m.jsx)(A,{filters:E}),Object(m.jsxs)("div",{className:"panels",children:[Object(m.jsx)(z,{filters:E}),Object(m.jsx)(C,{}),Object(m.jsx)(M,{clusters:y.clusters,filters:E,setClusters:function(e){return T((function(t){return Object(o.a)(Object(o.a)({},t),{},{clusters:e})}))},toggleCluster:function(e){T((function(t){return Object(o.a)(Object(o.a)({},t),{},{clusters:t.clusters[e]?Object(d.omit)(t.clusters,e):Object(o.a)(Object(o.a)({},t.clusters),{},Object(i.a)({},e,!0))})}))}}),Object(m.jsx)(B,{tags:y.tags,filters:E,setTags:function(e){return T((function(t){return Object(o.a)(Object(o.a)({},t),{},{tags:e})}))},toggleTag:function(e){T((function(t){return Object(o.a)(Object(o.a)({},t),{},{tags:t.tags[e]?Object(d.omit)(t.tags,e):Object(o.a)(Object(o.a)({},t.tags),{},Object(i.a)({},e,!0))})}))}})]})]})]})]})}):null};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(G,{})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.432c7ac4.chunk.js.map