{"version":3,"sources":["canvas-utils.ts","use-debounce.ts","views/GraphSettingsController.tsx","views/GraphEventsController.tsx","views/GraphDataController.tsx","views/Panel.tsx","views/DescriptionPanel.tsx","views/ClustersPanel.tsx","views/SearchField.tsx","views/GraphTitle.tsx","views/TagsPanel.tsx","views/Root.tsx","index.tsx"],"names":["TEXT_COLOR","drawLabel","context","data","settings","label","size","labelSize","font","labelFont","weight","labelWeight","width","measureText","fillStyle","fillRect","x","y","fillText","useDebounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","GraphSettingsController","children","hoveredNode","sigma","useSigma","graph","getGraph","debouncedHoveredNode","setSetting","subLabelSize","subLabel","tag","clusterLabel","beginPath","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","labelWidth","subLabelWidth","clusterLabelWidth","textWidth","Math","max","round","w","hLabel","hSubLabel","ctx","height","radius","moveTo","lineTo","quadraticCurveTo","closePath","drawRoundRect","fill","color","drawHover","getNodeDisplayData","key","hoveredColor","node","hasEdge","zIndex","image","highlighted","edge","hasExtremity","hidden","getMouseLayer","document","querySelector","GraphEventsController","setHoveredNode","registerEvents","useRegisterEvents","clickNode","getNodeAttribute","window","open","enterNode","mouseLayer","classList","add","leaveNode","remove","GraphDataController","dataset","filters","clusters","keyBy","tags","nodes","forEach","addNode","omit","cluster","process","edges","source","target","addEdge","scores","map","minDegree","min","maxDegree","forEachNode","setNodeAttribute","clear","Panel","title","initiallyDeployed","isDeployed","setIsDeployed","dom","useRef","current","parentElement","scrollTo","top","offsetTop","behavior","className","ref","type","onClick","v","duration","DescriptionPanel","rel","href","ClustersPanel","toggleCluster","setClusters","nodesPerCluster","useMemo","index","_","maxNodesPerCluster","values","visibleClustersCount","Object","keys","length","visibleNodesPerCluster","setVisibleNodesPerCluster","requestAnimationFrame","sortedClusters","sortBy","mapValues","nodesCount","visibleNodesCount","checked","onChange","id","htmlFor","style","background","borderColor","SearchField","search","setSearch","setValues","selected","setSelected","refreshValues","newValues","lcSearch","toLowerCase","attributes","indexOf","push","nodeDisplayData","getCamera","animate","ratio","placeholder","list","e","searchString","valueItem","find","onKeyPress","prettyPercentage","val","toFixed","GraphTitle","visibleItems","setVisibleItems","forEachEdge","_2","_3","_4","order","TagsPanel","toggleTag","setTags","nodesPerTag","maxNodesPerTag","visibleTagsCount","visibleNodesPerTag","setVisibleNodesPerTag","sortedTags","Infinity","backgroundImage","Root","showContents","setShowContents","dataReady","setDataReady","setDataset","filtersState","setFiltersState","fetch","then","res","json","constant","graphOptions","initialSettings","nodeProgramClasses","getNodeProgramImage","labelRenderer","defaultNodeType","defaultEdgeType","labelDensity","labelGridCellSize","labelRenderedSizeThreshold","customEnterFullScreen","customExitFullScreen","customZoomIn","customZoomOut","customZoomCenter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.432c7ac4.chunk.js","sourcesContent":["import { NodeDisplayData, PartialButFor, PlainObject } from \"sigma/types\";\nimport { Settings } from \"sigma/settings\";\n\nconst TEXT_COLOR = \"#000000\";\n\n/**\n * This function draw in the input canvas 2D context a rectangle.\n * It only deals with tracing the path, and does not fill or stroke.\n */\nexport function drawRoundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n): void {\n  ctx.beginPath();\n  ctx.moveTo(x + radius, y);\n  ctx.lineTo(x + width - radius, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n  ctx.lineTo(x + width, y + height - radius);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n  ctx.lineTo(x + radius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n  ctx.lineTo(x, y + radius);\n  ctx.quadraticCurveTo(x, y, x + radius, y);\n  ctx.closePath();\n}\n\n/**\n * Custom hover renderer\n */\nexport function drawHover(context: CanvasRenderingContext2D, data: PlainObject, settings: PlainObject) {\n  const size = settings.labelSize;\n  const font = settings.labelFont;\n  const weight = settings.labelWeight;\n  const subLabelSize = size - 2;\n\n  const label = data.label;\n  const subLabel = data.tag !== \"unknown\" ? data.tag : \"\";\n  const clusterLabel = data.clusterLabel;\n\n  // Then we draw the label background\n  context.beginPath();\n  context.fillStyle = \"#fff\";\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 2;\n  context.shadowBlur = 8;\n  context.shadowColor = \"#000\";\n\n  context.font = `${weight} ${size}px ${font}`;\n  const labelWidth = context.measureText(label).width;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  const subLabelWidth = subLabel ? context.measureText(subLabel).width : 0;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  const clusterLabelWidth = clusterLabel ? context.measureText(clusterLabel).width : 0;\n\n  const textWidth = Math.max(labelWidth, subLabelWidth, clusterLabelWidth);\n\n  const x = Math.round(data.x);\n  const y = Math.round(data.y);\n  const w = Math.round(textWidth + size / 2 + data.size + 3);\n  const hLabel = Math.round(size / 2 + 4);\n  const hSubLabel = subLabel ? Math.round(subLabelSize / 2 + 9) : 0;\n  const hClusterLabel = Math.round(subLabelSize / 2 + 9);\n\n  drawRoundRect(context, x, y - hSubLabel - 12, w, hClusterLabel + hLabel + hSubLabel + 12, 5);\n  context.closePath();\n  context.fill();\n\n  context.shadowOffsetX = 0;\n  context.shadowOffsetY = 0;\n  context.shadowBlur = 0;\n\n  // And finally we draw the labels\n  context.fillStyle = TEXT_COLOR;\n  context.font = `${weight} ${size}px ${font}`;\n  context.fillText(label, data.x + data.size + 3, data.y + size / 3);\n\n  if (subLabel) {\n    context.fillStyle = TEXT_COLOR;\n    context.font = `${weight} ${subLabelSize}px ${font}`;\n    context.fillText(subLabel, data.x + data.size + 3, data.y - (2 * size) / 3 - 2);\n  }\n\n  context.fillStyle = data.color;\n  context.font = `${weight} ${subLabelSize}px ${font}`;\n  context.fillText(clusterLabel, data.x + data.size + 3, data.y + size / 3 + 3 + subLabelSize);\n}\n\n/**\n * Custom label renderer\n */\nexport default function drawLabel(\n  context: CanvasRenderingContext2D,\n  data: PartialButFor<NodeDisplayData, \"x\" | \"y\" | \"size\" | \"label\" | \"color\">,\n  settings: Settings,\n): void {\n  if (!data.label) return;\n\n  const size = settings.labelSize,\n    font = settings.labelFont,\n    weight = settings.labelWeight;\n\n  context.font = `${weight} ${size}px ${font}`;\n  const width = context.measureText(data.label).width + 8;\n\n  context.fillStyle = \"#ffffffcc\";\n  context.fillRect(data.x + data.size, data.y + size / 3 - 15, width, 20);\n\n  context.fillStyle = \"#000\";\n  context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\n","import { useEffect, useState } from \"react\";\n\nfunction useDebounce<T>(value: T, delay: number): T {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        if (value !== debouncedValue) setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay], // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n\nexport default useDebounce;\n","import { useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\n\nimport { drawHover } from \"../canvas-utils\";\nimport useDebounce from \"../use-debounce\";\n\nconst NODE_FADE_COLOR = \"#bbb\";\nconst EDGE_FADE_COLOR = \"#eee\";\n\nconst GraphSettingsController: FC<{ hoveredNode: string | null }> = ({ children, hoveredNode }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n\n  // Here we debounce the value to avoid having too much highlights refresh when\n  // moving the mouse over the graph:\n  const debouncedHoveredNode = useDebounce(hoveredNode, 40);\n\n  /**\n   * Initialize here settings that require to know the graph and/or the sigma\n   * instance:\n   */\n  useEffect(() => {\n    sigma.setSetting(\"hoverRenderer\", (context, data, settings) =>\n      drawHover(context, { ...sigma.getNodeDisplayData(data.key), ...data }, settings),\n    );\n  }, [sigma, graph]);\n\n  /**\n   * Update node and edge reducers when a node is hovered, to highlight its\n   * neighborhood:\n   */\n  useEffect(() => {\n    const hoveredColor: string = debouncedHoveredNode ? sigma.getNodeDisplayData(debouncedHoveredNode)!.color : \"\";\n\n    sigma.setSetting(\n      \"nodeReducer\",\n      debouncedHoveredNode\n        ? (node, data) =>\n            node === debouncedHoveredNode ||\n            graph.hasEdge(node, debouncedHoveredNode) ||\n            graph.hasEdge(debouncedHoveredNode, node)\n              ? { ...data, zIndex: 1 }\n              : { ...data, zIndex: 0, label: \"\", color: NODE_FADE_COLOR, image: null, highlighted: false }\n        : null,\n    );\n    sigma.setSetting(\n      \"edgeReducer\",\n      debouncedHoveredNode\n        ? (edge, data) =>\n            graph.hasExtremity(edge, debouncedHoveredNode)\n              ? { ...data, color: hoveredColor, size: 4 }\n              : { ...data, color: EDGE_FADE_COLOR, hidden: true }\n        : null,\n    );\n  }, [debouncedHoveredNode]);\n\n  return <>{children}</>;\n};\n\nexport default GraphSettingsController;\n","import { useRegisterEvents, useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\n\nfunction getMouseLayer() {\n  return document.querySelector(\".sigma-mouse\");\n}\n\nconst GraphEventsController: FC<{ setHoveredNode: (node: string | null) => void }> = ({ setHoveredNode, children }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n  const registerEvents = useRegisterEvents();\n\n  /**\n   * Initialize here settings that require to know the graph and/or the sigma\n   * instance:\n   */\n  useEffect(() => {\n    registerEvents({\n      clickNode({ node }) {\n        if (!graph.getNodeAttribute(node, \"hidden\")) {\n          window.open(graph.getNodeAttribute(node, \"URL\"), \"_blank\");\n        }\n      },\n      enterNode({ node }) {\n        setHoveredNode(node);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n        if (mouseLayer) mouseLayer.classList.add(\"mouse-pointer\");\n      },\n      leaveNode() {\n        setHoveredNode(null);\n        // TODO: Find a better way to get the DOM mouse layer:\n        const mouseLayer = getMouseLayer();\n        if (mouseLayer) mouseLayer.classList.remove(\"mouse-pointer\");\n      },\n    });\n  }, []);\n\n  return <>{children}</>;\n};\n\nexport default GraphEventsController;\n","import { useSigma } from \"react-sigma-v2\";\nimport { FC, useEffect } from \"react\";\nimport { keyBy, omit } from \"lodash\";\n\nimport { Dataset, FiltersState } from \"../types\";\n\nconst GraphDataController: FC<{ dataset: Dataset; filters: FiltersState }> = ({ dataset, filters, children }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n\n  /**\n   * Feed graphology with the new dataset:\n   */\n  useEffect(() => {\n    if (!graph || !dataset) return;\n\n    const clusters = keyBy(dataset.clusters, \"key\");\n    const tags = keyBy(dataset.tags, \"key\");\n\n    dataset.nodes.forEach((node) =>\n      graph.addNode(node.key, {\n        ...node,\n        ...omit(clusters[node.cluster], \"key\"),\n        image: `${process.env.PUBLIC_URL}/images/${tags[node.tag].image}`,\n      }),\n    );\n    dataset.edges.forEach(([source, target]) => graph.addEdge(source, target, { size: 1 }));\n\n    // Use degrees as node sizes:\n    const scores = graph.nodes().map((node) => graph.getNodeAttribute(node, \"score\"));\n    const minDegree = Math.min(...scores);\n    const maxDegree = Math.max(...scores);\n    const MIN_NODE_SIZE = 3;\n    const MAX_NODE_SIZE = 30;\n    graph.forEachNode((node) =>\n      graph.setNodeAttribute(\n        node,\n        \"size\",\n        ((graph.getNodeAttribute(node, \"score\") - minDegree) / (maxDegree - minDegree)) *\n          (MAX_NODE_SIZE - MIN_NODE_SIZE) +\n          MIN_NODE_SIZE,\n      ),\n    );\n\n    return () => graph.clear();\n  }, [graph, dataset]);\n\n  /**\n   * Apply filters to graphology:\n   */\n  useEffect(() => {\n    const { clusters, tags } = filters;\n    graph.forEachNode((node, { cluster, tag }) =>\n      graph.setNodeAttribute(node, \"hidden\", !clusters[cluster] || !tags[tag]),\n    );\n  }, [graph, filters]);\n\n  return <>{children}</>;\n};\n\nexport default GraphDataController;\n","import React, { FC, useEffect, useRef, useState } from \"react\";\nimport { MdExpandLess, MdExpandMore } from \"react-icons/md\";\nimport AnimateHeight from \"react-animate-height\";\n\nconst DURATION = 300;\n\nconst Panel: FC<{ title: JSX.Element | string; initiallyDeployed?: boolean }> = ({\n  title,\n  initiallyDeployed,\n  children,\n}) => {\n  const [isDeployed, setIsDeployed] = useState(initiallyDeployed || false);\n  const dom = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isDeployed)\n      setTimeout(() => {\n        if (dom.current) dom.current.parentElement!.scrollTo({ top: dom.current.offsetTop - 5, behavior: \"smooth\" });\n      }, DURATION);\n  }, [isDeployed]);\n\n  return (\n    <div className=\"panel\" ref={dom}>\n      <h2>\n        {title}{\" \"}\n        <button type=\"button\" onClick={() => setIsDeployed((v) => !v)}>\n          {isDeployed ? <MdExpandLess /> : <MdExpandMore />}\n        </button>\n      </h2>\n      <AnimateHeight duration={DURATION} height={isDeployed ? \"auto\" : 0}>\n        {children}\n      </AnimateHeight>\n    </div>\n  );\n};\n\nexport default Panel;\n","import React, { FC } from \"react\";\nimport { BsInfoCircle } from \"react-icons/all\";\n\nimport Panel from \"./Panel\";\n\nconst DescriptionPanel: FC = () => {\n  return (\n    <Panel\n      initiallyDeployed\n      title={\n        <>\n          <BsInfoCircle className=\"text-muted\" /> Description\n        </>\n      }\n    >\n      <p>\n        This map represents a <i>network</i> of Wikipedia articles around the topic of \"Data vizualisation\". Each{\" \"}\n        <i>node</i> represents an article, and each edge a{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://en.wikipedia.org/wiki/See_also\">\n          \"See also\" link\n        </a>\n        .\n      </p>\n      <p>\n        The seed articles were selected by hand by the{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://medialab.sciencespo.fr/\">\n          Sciences-Po médialab\n        </a>{\" \"}\n        team, and the network was crawled using{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://densitydesign.github.io/strumentalia-seealsology/\">\n          Seealsology\n        </a>\n        , and then cleaned and enriched manually. This makes the dataset creditable to both the médialab team and{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://en.wikipedia.org/wiki/Wikipedia:Wikipedians\">\n          Wikipedia editors\n        </a>\n        .\n      </p>\n      <p>\n        This web application has been developed by{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.ouestware.com/en/\">\n          OuestWare\n        </a>\n        , using{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://reactjs.org/\">\n          react\n        </a>{\" \"}\n        and{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.sigmajs.org\">\n          sigma.js\n        </a>\n        . You can read the source code{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/jacomyal/sigma.js/tree/main/demo\">\n          on GitHub\n        </a>\n        .\n      </p>\n      <p>\n        Nodes sizes are related to their{\" \"}\n        <a target=\"_blank\" rel=\"noreferrer\" href=\"https://en.wikipedia.org/wiki/Betweenness_centrality\">\n          betweenness centrality\n        </a>\n        . More central nodes (ie. bigger nodes) are important crossing points in the network. Finally, You can click a\n        node to open the related Wikipedia article.\n      </p>\n    </Panel>\n  );\n};\n\nexport default DescriptionPanel;\n","import React, { FC, useEffect, useMemo, useState } from \"react\";\nimport { useSigma } from \"react-sigma-v2\";\nimport { sortBy, values, keyBy, mapValues } from \"lodash\";\n\nimport { Cluster, FiltersState } from \"../types\";\nimport { MdGroupWork } from \"react-icons/md\";\nimport Panel from \"./Panel\";\nimport { AiOutlineCheckCircle, AiOutlineCloseCircle } from \"react-icons/all\";\n\nconst ClustersPanel: FC<{\n  clusters: Cluster[];\n  filters: FiltersState;\n  toggleCluster: (cluster: string) => void;\n  setClusters: (clusters: Record<string, boolean>) => void;\n}> = ({ clusters, filters, toggleCluster, setClusters }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n\n  const nodesPerCluster = useMemo(() => {\n    const index: Record<string, number> = {};\n    graph.forEachNode((_, { cluster }) => (index[cluster] = (index[cluster] || 0) + 1));\n    return index;\n  }, []);\n\n  const maxNodesPerCluster = useMemo(() => Math.max(...values(nodesPerCluster)), [nodesPerCluster]);\n  const visibleClustersCount = useMemo(() => Object.keys(filters.clusters).length, [filters]);\n\n  const [visibleNodesPerCluster, setVisibleNodesPerCluster] = useState<Record<string, number>>(nodesPerCluster);\n  useEffect(() => {\n    // To ensure the graphology instance has up to data \"hidden\" values for\n    // nodes, we wait for next frame before reindexing. This won't matter in the\n    // UX, because of the visible nodes bar width transition.\n    requestAnimationFrame(() => {\n      const index: Record<string, number> = {};\n      graph.forEachNode((_, { cluster, hidden }) => !hidden && (index[cluster] = (index[cluster] || 0) + 1));\n      setVisibleNodesPerCluster(index);\n    });\n  }, [filters]);\n\n  const sortedClusters = useMemo(\n    () => sortBy(clusters, (cluster) => -nodesPerCluster[cluster.key]),\n    [clusters, nodesPerCluster],\n  );\n\n  return (\n    <Panel\n      title={\n        <>\n          <MdGroupWork className=\"text-muted\" /> Clusters\n          {visibleClustersCount < clusters.length ? (\n            <span className=\"text-muted text-small\">\n              {\" \"}\n              ({visibleClustersCount} / {clusters.length})\n            </span>\n          ) : (\n            \"\"\n          )}\n        </>\n      }\n    >\n      <p>\n        <i className=\"text-muted\">Click a cluster to show/hide related pages from the network.</i>\n      </p>\n      <p className=\"buttons\">\n        <button className=\"btn\" onClick={() => setClusters(mapValues(keyBy(clusters, \"key\"), () => true))}>\n          <AiOutlineCheckCircle /> Check all\n        </button>{\" \"}\n        <button className=\"btn\" onClick={() => setClusters({})}>\n          <AiOutlineCloseCircle /> Uncheck all\n        </button>\n      </p>\n      <ul>\n        {sortedClusters.map((cluster) => {\n          const nodesCount = nodesPerCluster[cluster.key];\n          const visibleNodesCount = visibleNodesPerCluster[cluster.key] || 0;\n          return (\n            <li\n              className=\"caption-row\"\n              key={cluster.key}\n              title={`${nodesCount} page${nodesCount > 1 ? \"s\" : \"\"}${\n                visibleNodesCount !== nodesCount ? ` (only ${visibleNodesCount} visible)` : \"\"\n              }`}\n            >\n              <input\n                type=\"checkbox\"\n                checked={filters.clusters[cluster.key] || false}\n                onChange={() => toggleCluster(cluster.key)}\n                id={`cluster-${cluster.key}`}\n              />\n              <label htmlFor={`cluster-${cluster.key}`}>\n                <span className=\"circle\" style={{ background: cluster.color, borderColor: cluster.color }} />{\" \"}\n                <div className=\"node-label\">\n                  <span>{cluster.clusterLabel}</span>\n                  <div className=\"bar\" style={{ width: (100 * nodesCount) / maxNodesPerCluster + \"%\" }}>\n                    <div\n                      className=\"inside-bar\"\n                      style={{\n                        width: (100 * visibleNodesCount) / nodesCount + \"%\",\n                      }}\n                    />\n                  </div>\n                </div>\n              </label>\n            </li>\n          );\n        })}\n      </ul>\n    </Panel>\n  );\n};\n\nexport default ClustersPanel;\n","import React, { KeyboardEvent, ChangeEvent, FC, useEffect, useState } from \"react\";\nimport { useSigma } from \"react-sigma-v2\";\nimport { Attributes } from \"graphology-types\";\nimport { BsSearch } from \"react-icons/bs\";\n\nimport { FiltersState } from \"../types\";\n\n/**\n * This component is basically a fork from React-sigma-v2's SearchControl\n * component, to get some minor adjustments:\n * 1. We need to hide hidden nodes from results\n * 2. We need custom markup\n */\nconst SearchField: FC<{ filters: FiltersState }> = ({ filters }) => {\n  const sigma = useSigma();\n\n  const [search, setSearch] = useState<string>(\"\");\n  const [values, setValues] = useState<Array<{ id: string; label: string }>>([]);\n  const [selected, setSelected] = useState<string | null>(null);\n\n  const refreshValues = () => {\n    const newValues: Array<{ id: string; label: string }> = [];\n    const lcSearch = search.toLowerCase();\n    if (!selected && search.length > 1) {\n      sigma.getGraph().forEachNode((key: string, attributes: Attributes): void => {\n        if (!attributes.hidden && attributes.label && attributes.label.toLowerCase().indexOf(lcSearch) === 0)\n          newValues.push({ id: key, label: attributes.label });\n      });\n    }\n    setValues(newValues);\n  };\n\n  // Refresh values when search is updated:\n  useEffect(() => refreshValues(), [search]);\n\n  // Refresh values when filters are updated (but wait a frame first):\n  useEffect(() => {\n    requestAnimationFrame(refreshValues);\n  }, [filters]);\n\n  useEffect(() => {\n    if (!selected) return;\n\n    sigma.getGraph().setNodeAttribute(selected, \"highlighted\", true);\n    const nodeDisplayData = sigma.getNodeDisplayData(selected);\n\n    if (nodeDisplayData)\n      sigma.getCamera().animate(\n        { ...nodeDisplayData, ratio: 0.05 },\n        {\n          duration: 600,\n        },\n      );\n\n    return () => {\n      sigma.getGraph().setNodeAttribute(selected, \"highlighted\", false);\n    };\n  }, [selected]);\n\n  const onInputChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const searchString = e.target.value;\n    const valueItem = values.find((value) => value.label === searchString);\n    if (valueItem) {\n      setSearch(valueItem.label);\n      setValues([]);\n      setSelected(valueItem.id);\n    } else {\n      setSelected(null);\n      setSearch(searchString);\n    }\n  };\n\n  const onKeyPress = (e: KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && values.length) {\n      setSearch(values[0].label);\n      setSelected(values[0].id);\n    }\n  };\n\n  return (\n    <div className=\"search-wrapper\">\n      <input\n        type=\"search\"\n        placeholder=\"Search in nodes...\"\n        list=\"nodes\"\n        value={search}\n        onChange={onInputChange}\n        onKeyPress={onKeyPress}\n      />\n      <BsSearch className=\"icon\" />\n      <datalist id=\"nodes\">\n        {values.map((value: { id: string; label: string }) => (\n          <option key={value.id} value={value.label}>\n            {value.label}\n          </option>\n        ))}\n      </datalist>\n    </div>\n  );\n};\n\nexport default SearchField;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { FiltersState } from \"../types\";\nimport { useSigma } from \"react-sigma-v2\";\n\nfunction prettyPercentage(val: number): string {\n  return (val * 100).toFixed(1) + \"%\";\n}\n\nconst GraphTitle: FC<{ filters: FiltersState }> = ({ filters }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n\n  const [visibleItems, setVisibleItems] = useState<{ nodes: number; edges: number }>({ nodes: 0, edges: 0 });\n  useEffect(() => {\n    // To ensure the graphology instance has up to data \"hidden\" values for\n    // nodes, we wait for next frame before reindexing. This won't matter in the\n    // UX, because of the visible nodes bar width transition.\n    requestAnimationFrame(() => {\n      const index = { nodes: 0, edges: 0 };\n      graph.forEachNode((_, { hidden }) => !hidden && index.nodes++);\n      graph.forEachEdge((_, _2, _3, _4, source, target) => !source.hidden && !target.hidden && index.edges++);\n      setVisibleItems(index);\n    });\n  }, [filters]);\n\n  return (\n    <div className=\"graph-title\">\n      <h1>A cartography of Wikipedia pages around data visualization</h1>\n      <h2>\n        <i>\n          {graph.order} node{graph.order > 1 ? \"s\" : \"\"}{\" \"}\n          {visibleItems.nodes !== graph.order\n            ? ` (only ${prettyPercentage(visibleItems.nodes / graph.order)} visible)`\n            : \"\"}\n          , {graph.size} edge\n          {graph.size > 1 ? \"s\" : \"\"}{\" \"}\n          {visibleItems.edges !== graph.size\n            ? ` (only ${prettyPercentage(visibleItems.edges / graph.size)} visible)`\n            : \"\"}\n        </i>\n      </h2>\n    </div>\n  );\n};\n\nexport default GraphTitle;\n","import React, { FC, useEffect, useMemo, useState } from \"react\";\nimport { MdCategory } from \"react-icons/md\";\n\nimport { FiltersState, Tag } from \"../types\";\nimport { useSigma } from \"react-sigma-v2\";\nimport { keyBy, mapValues, sortBy, values } from \"lodash\";\nimport Panel from \"./Panel\";\nimport { AiOutlineCheckCircle, AiOutlineCloseCircle } from \"react-icons/all\";\n\nconst TagsPanel: FC<{\n  tags: Tag[];\n  filters: FiltersState;\n  toggleTag: (tag: string) => void;\n  setTags: (tags: Record<string, boolean>) => void;\n}> = ({ tags, filters, toggleTag, setTags }) => {\n  const sigma = useSigma();\n  const graph = sigma.getGraph();\n\n  const nodesPerTag = useMemo(() => {\n    const index: Record<string, number> = {};\n    graph.forEachNode((_, { tag }) => (index[tag] = (index[tag] || 0) + 1));\n    return index;\n  }, []);\n\n  const maxNodesPerTag = useMemo(() => Math.max(...values(nodesPerTag)), [nodesPerTag]);\n  const visibleTagsCount = useMemo(() => Object.keys(filters.tags).length, [filters]);\n\n  const [visibleNodesPerTag, setVisibleNodesPerTag] = useState<Record<string, number>>(nodesPerTag);\n  useEffect(() => {\n    // To ensure the graphology instance has up to data \"hidden\" values for\n    // nodes, we wait for next frame before reindexing. This won't matter in the\n    // UX, because of the visible nodes bar width transition.\n    requestAnimationFrame(() => {\n      const index: Record<string, number> = {};\n      graph.forEachNode((_, { tag, hidden }) => !hidden && (index[tag] = (index[tag] || 0) + 1));\n      setVisibleNodesPerTag(index);\n    });\n  }, [filters]);\n\n  const sortedTags = useMemo(\n    () => sortBy(tags, (tag) => (tag.key === \"unknown\" ? Infinity : -nodesPerTag[tag.key])),\n    [tags, nodesPerTag],\n  );\n\n  return (\n    <Panel\n      title={\n        <>\n          <MdCategory className=\"text-muted\" /> Categories\n          {visibleTagsCount < tags.length ? (\n            <span className=\"text-muted text-small\">\n              {\" \"}\n              ({visibleTagsCount} / {tags.length})\n            </span>\n          ) : (\n            \"\"\n          )}\n        </>\n      }\n    >\n      <p>\n        <i className=\"text-muted\">Click a category to show/hide related pages from the network.</i>\n      </p>\n      <p className=\"buttons\">\n        <button className=\"btn\" onClick={() => setTags(mapValues(keyBy(tags, \"key\"), () => true))}>\n          <AiOutlineCheckCircle /> Check all\n        </button>{\" \"}\n        <button className=\"btn\" onClick={() => setTags({})}>\n          <AiOutlineCloseCircle /> Uncheck all\n        </button>\n      </p>\n      <ul>\n        {sortedTags.map((tag) => {\n          const nodesCount = nodesPerTag[tag.key];\n          const visibleNodesCount = visibleNodesPerTag[tag.key] || 0;\n          return (\n            <li\n              className=\"caption-row\"\n              key={tag.key}\n              title={`${nodesCount} page${nodesCount > 1 ? \"s\" : \"\"}${\n                visibleNodesCount !== nodesCount ? ` (only ${visibleNodesCount} visible)` : \"\"\n              }`}\n            >\n              <input\n                type=\"checkbox\"\n                checked={filters.tags[tag.key] || false}\n                onChange={() => toggleTag(tag.key)}\n                id={`tag-${tag.key}`}\n              />\n              <label htmlFor={`tag-${tag.key}`}>\n                <span\n                  className=\"circle\"\n                  style={{ backgroundImage: `url(${process.env.PUBLIC_URL}/images/${tag.image})` }}\n                />{\" \"}\n                <div className=\"node-label\">\n                  <span>{tag.key}</span>\n                  <div className=\"bar\" style={{ width: (100 * nodesCount) / maxNodesPerTag + \"%\" }}>\n                    <div\n                      className=\"inside-bar\"\n                      style={{\n                        width: (100 * visibleNodesCount) / nodesCount + \"%\",\n                      }}\n                    />\n                  </div>\n                </div>\n              </label>\n            </li>\n          );\n        })}\n      </ul>\n    </Panel>\n  );\n};\n\nexport default TagsPanel;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { SigmaContainer, ZoomControl, FullScreenControl } from \"react-sigma-v2\";\n\nimport getNodeProgramImage from \"sigma/rendering/webgl/programs/node.image\";\nimport { omit, mapValues, keyBy, constant } from \"lodash\";\n\nimport GraphSettingsController from \"./GraphSettingsController\";\nimport GraphEventsController from \"./GraphEventsController\";\nimport GraphDataController from \"./GraphDataController\";\nimport DescriptionPanel from \"./DescriptionPanel\";\nimport { Dataset, FiltersState } from \"../types\";\nimport ClustersPanel from \"./ClustersPanel\";\nimport SearchField from \"./SearchField\";\nimport drawLabel from \"../canvas-utils\";\nimport GraphTitle from \"./GraphTitle\";\nimport TagsPanel from \"./TagsPanel\";\n\nimport \"react-sigma-v2/lib/react-sigma-v2.css\";\nimport { GrClose } from \"react-icons/gr\";\nimport { BiRadioCircleMarked, BiBookContent } from \"react-icons/bi\";\nimport { BsArrowsFullscreen, BsFullscreenExit, BsZoomIn, BsZoomOut } from \"react-icons/bs\";\n\nconst Root: FC = () => {\n  const [showContents, setShowContents] = useState(false);\n  const [dataReady, setDataReady] = useState(false);\n  const [dataset, setDataset] = useState<Dataset | null>(null);\n  const [filtersState, setFiltersState] = useState<FiltersState>({\n    clusters: {},\n    tags: {},\n  });\n  const [hoveredNode, setHoveredNode] = useState<string | null>(null);\n\n  // Load data on mount:\n  useEffect(() => {\n    fetch(`${process.env.PUBLIC_URL}/dataset.json`)\n      .then((res) => res.json())\n      .then((dataset: Dataset) => {\n        setDataset(dataset);\n        setFiltersState({\n          clusters: mapValues(keyBy(dataset.clusters, \"key\"), constant(true)),\n          tags: mapValues(keyBy(dataset.tags, \"key\"), constant(true)),\n        });\n        requestAnimationFrame(() => setDataReady(true));\n      });\n  }, []);\n\n  if (!dataset) return null;\n\n  return (\n    <div id=\"app-root\" className={showContents ? \"show-contents\" : \"\"}>\n      <SigmaContainer\n        graphOptions={{ type: \"directed\" }}\n        initialSettings={{\n          nodeProgramClasses: { image: getNodeProgramImage() },\n          labelRenderer: drawLabel,\n          defaultNodeType: \"image\",\n          defaultEdgeType: \"arrow\",\n          labelDensity: 0.07,\n          labelGridCellSize: 60,\n          labelRenderedSizeThreshold: 15,\n          labelFont: \"Lato, sans-serif\",\n          zIndex: true,\n        }}\n        className=\"react-sigma\"\n      >\n        <GraphSettingsController hoveredNode={hoveredNode} />\n        <GraphEventsController setHoveredNode={setHoveredNode} />\n        <GraphDataController dataset={dataset} filters={filtersState} />\n\n        {dataReady && (\n          <>\n            <div className=\"controls\">\n              <div className=\"ico\">\n                <button\n                  type=\"button\"\n                  className=\"show-contents\"\n                  onClick={() => setShowContents(true)}\n                  title=\"Show caption and description\"\n                >\n                  <BiBookContent />\n                </button>\n              </div>\n              <FullScreenControl\n                className=\"ico\"\n                customEnterFullScreen={<BsArrowsFullscreen />}\n                customExitFullScreen={<BsFullscreenExit />}\n              />\n              <ZoomControl\n                className=\"ico\"\n                customZoomIn={<BsZoomIn />}\n                customZoomOut={<BsZoomOut />}\n                customZoomCenter={<BiRadioCircleMarked />}\n              />\n            </div>\n            <div className=\"contents\">\n              <div className=\"ico\">\n                <button\n                  type=\"button\"\n                  className=\"ico hide-contents\"\n                  onClick={() => setShowContents(false)}\n                  title=\"Show caption and description\"\n                >\n                  <GrClose />\n                </button>\n              </div>\n              <GraphTitle filters={filtersState} />\n              <div className=\"panels\">\n                <SearchField filters={filtersState} />\n                <DescriptionPanel />\n                <ClustersPanel\n                  clusters={dataset.clusters}\n                  filters={filtersState}\n                  setClusters={(clusters) =>\n                    setFiltersState((filters) => ({\n                      ...filters,\n                      clusters,\n                    }))\n                  }\n                  toggleCluster={(cluster) => {\n                    setFiltersState((filters) => ({\n                      ...filters,\n                      clusters: filters.clusters[cluster]\n                        ? omit(filters.clusters, cluster)\n                        : { ...filters.clusters, [cluster]: true },\n                    }));\n                  }}\n                />\n                <TagsPanel\n                  tags={dataset.tags}\n                  filters={filtersState}\n                  setTags={(tags) =>\n                    setFiltersState((filters) => ({\n                      ...filters,\n                      tags,\n                    }))\n                  }\n                  toggleTag={(tag) => {\n                    setFiltersState((filters) => ({\n                      ...filters,\n                      tags: filters.tags[tag] ? omit(filters.tags, tag) : { ...filters.tags, [tag]: true },\n                    }));\n                  }}\n                />\n              </div>\n            </div>\n          </>\n        )}\n      </SigmaContainer>\n    </div>\n  );\n};\n\nexport default Root;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\nimport Root from \"./views/Root\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Root />\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}